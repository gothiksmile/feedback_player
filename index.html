<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gothiksmile Feedback Builder</title>
    <style>
        :root { --accent: #ff0055; --bg: #0f0f0f; --panel: #1a1a1a; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; background: var(--bg); color: white; }

        .preview-section { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; border-right: 1px solid #333; position: relative; }
        .preview-label { position: absolute; top: 20px; font-size: 12px; color: #555; text-transform: uppercase; letter-spacing: 2px; }

        .editor-section { width: 360px; background: var(--panel); padding: 30px; overflow-y: auto; box-shadow: -5px 0 20px rgba(0,0,0,0.5); }
        
        h2 { margin-top: 0; font-size: 1.2rem; border-bottom: 2px solid var(--accent); display: inline-block; padding-bottom: 5px; margin-bottom: 25px; }
        .control-group { margin-bottom: 20px; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; }
        label { display: block; font-size: 11px; color: #aaa; margin-bottom: 8px; text-transform: uppercase; }
        input[type="range"], input[type="color"], input[type="text"], select { width: 100%; cursor: pointer; border: none; background: transparent; color: white; }
        input[type="text"], select { background: rgba(0,0,0,0.3); padding: 8px; border-radius: 5px; cursor: text; font-size: 13px; box-sizing: border-box; }
        select { cursor: pointer; border: 1px solid #444; }
        
        .action-btn { width: 100%; padding: 15px; background: var(--accent); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .reset-btn { width: 100%; padding: 10px; background: transparent; color: #666; border: 1px solid #444; border-radius: 8px; font-size: 11px; cursor: pointer; margin-top: 20px; transition: 0.3s; }
        .reset-btn:hover { color: white; border-color: white; }
        .action-btn:hover { filter: brightness(1.2); transform: translateY(-2px); }

        #player-mock { transition: all 0.2s ease; display: flex; flex-direction: column; align-items: center; width: 280px; }
        .m-screen { border-radius: 50%; display: flex; justify-content: center; align-items: center; margin-bottom: 25px; box-sizing: border-box; }
        .m-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .m-btn { display: flex; justify-content: center; align-items: center; pointer-events: none; }
    </style>
</head>
<body>

<div class="preview-section">
    <div class="preview-label">Live Preview</div>
    <div id="player-mock">
        <div id="m-title" style="font-weight: bold; margin-bottom: 15px; letter-spacing: 2px; text-transform: uppercase;">PLAYING NOW</div>
        <div class="m-screen" id="m-scr">
            <span id="m-ready" style="font-size: 10px; opacity: 0.3;">READY</span>
        </div>
        <div class="m-grid">
            <div class="m-btn">üò§</div><div class="m-btn">‚ò∫Ô∏è</div><div class="m-btn">üòç</div>
            <div class="m-btn">ü§î</div><div class="m-btn">üò¢</div><div class="m-btn">üò≥</div>
        </div>
    </div>
</div>

<div class="editor-section">
    <h2>Customize Player</h2>
    
    <div class="control-group">
        <label>Title Text & Size</label>
        <input type="text" id="p-title-text" value="PLAYING NOW" oninput="liveUpdate()" maxlength="25" style="margin-bottom:10px;">
        <input type="range" id="p-font-size" min="8" max="24" step="1" value="10" oninput="liveUpdate()">
    </div>

    <div class="control-group">
        <label>Font Style</label>
        <select id="p-font-family" onchange="liveUpdate()">
            <option value="'Segoe UI', sans-serif">Modern (Sans)</option>
            <option value="'Courier New', monospace">Retro (Mono)</option>
            <option value="Georgia, serif">Elegant (Serif)</option>
            <option value="Impact, Charcoal, sans-serif">Bold (Impact)</option>
        </select>
    </div>

    <div class="control-group">
        <label>Circle Border Style</label>
        <select id="p-border-style" onchange="liveUpdate()">
            <option value="solid">Solid</option>
            <option value="dashed">Dashed</option>
            <option value="dotted">Dotted</option>
            <option value="double">Double</option>
        </select>
    </div>

    <div class="control-group">
        <label>Console Color & Transparency</label>
        <input type="color" id="p-color" value="#1a1a1a" oninput="liveUpdate()">
        <input type="range" id="p-alpha" min="0" max="1" step="0.01" value="0.95" oninput="liveUpdate()">
    </div>
    <div class="control-group">
        <label>Circle Screen Background</label>
        <input type="color" id="p-scr-bg" value="#000000" oninput="liveUpdate()">
    </div>
    <div class="control-group">
        <label>Accent Color (Ring/Text)</label>
        <input type="color" id="p-accent" value="#ff0055" oninput="liveUpdate()">
    </div>
    <div class="control-group">
        <label>Button Color</label>
        <input type="color" id="p-btn" value="#333333" oninput="liveUpdate()">
    </div>
    <div class="control-group">
        <label>Overall Size</label>
        <input type="range" id="p-scale" min="0.5" max="1.4" step="0.01" value="1.0" oninput="liveUpdate()">
    </div>
    <button class="action-btn" onclick="copyGeniallyCode()">COPY IFRAME CODE</button>
    <button class="reset-btn" onclick="resetToDefault()">RESET TO DEFAULTS</button>
</div>

<script>
    function liveUpdate() {
        const titleText = document.getElementById('p-title-text').value,
              fSize = document.getElementById('p-font-size').value,
              fFamily = document.getElementById('p-font-family').value,
              bStyle = document.getElementById('p-border-style').value,
              color = document.getElementById('p-color').value, 
              alpha = document.getElementById('p-alpha').value, 
              accent = document.getElementById('p-accent').value, 
              btn = document.getElementById('p-btn').value, 
              scale = document.getElementById('p-scale').value,
              scrBg = document.getElementById('p-scr-bg').value;

        const r = parseInt(color.slice(1,3), 16), g = parseInt(color.slice(3,5), 16), b = parseInt(color.slice(5,7), 16);
        const player = document.getElementById('player-mock');
        player.style.background = `rgba(${r},${g},${b},${alpha})`;
        player.style.padding = "40px 30px"; player.style.borderRadius = "50px"; player.style.transform = `scale(${scale})`; player.style.border = `1px solid rgba(255,255,255,0.1)`;
        player.style.fontFamily = fFamily;
        
        const scr = document.getElementById('m-scr');
        scr.style.width = "190px"; scr.style.height = "190px"; 
        scr.style.border = `${bStyle === 'double' ? '6px' : '4px'} ${bStyle} ${accent}`; 
        scr.style.boxShadow = `0 0 20px ${accent}`; scr.style.backgroundColor = scrBg;
        
        const titleElem = document.getElementById('m-title');
        titleElem.style.color = accent;
        titleElem.style.fontSize = fSize + "px";
        titleElem.innerText = titleText;

        document.querySelectorAll('.m-btn').forEach(bElement => {
            bElement.style.background = btn; bElement.style.width = "60px"; bElement.style.height = "60px"; bElement.style.borderRadius = "15px";
            bElement.style.fontSize = "22px";
        });
    }

    function resetToDefault() {
        document.getElementById('p-title-text').value = "PLAYING NOW";
        document.getElementById('p-font-size').value = "10";
        document.getElementById('p-font-family').value = "'Segoe UI', sans-serif";
        document.getElementById('p-border-style').value = "solid";
        document.getElementById('p-color').value = "#1a1a1a";
        document.getElementById('p-alpha').value = "0.95";
        document.getElementById('p-scr-bg').value = "#000000";
        document.getElementById('p-accent').value = "#ff0055";
        document.getElementById('p-btn').value = "#333333";
        document.getElementById('p-scale').value = "1.0";
        liveUpdate();
    }

    function copyGeniallyCode() {
        const titleText = document.getElementById('p-title-text').value,
              fSize = document.getElementById('p-font-size').value,
              fFamily = document.getElementById('p-font-family').value,
              bStyle = document.getElementById('p-border-style').value,
              color = document.getElementById('p-color').value, 
              alpha = document.getElementById('p-alpha').value, 
              accent = document.getElementById('p-accent').value, 
              btn = document.getElementById('p-btn').value, 
              scale = document.getElementById('p-scale').value,
              scrBg = document.getElementById('p-scr-bg').value;

        const r = parseInt(color.slice(1,3), 16), g = parseInt(color.slice(3,5), 16), b = parseInt(color.slice(5,7), 16);

        const innerHTML = `
<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<style>
    body { margin:0; background:transparent; display:flex; justify-content:center; align-items:center; height:100vh; overflow:hidden; font-family:${fFamily}; }
    .c { background:rgba(${r},${g},${b},${alpha}); padding:45px 35px; border-radius:60px; text-align:center; transform:scale(${scale}); border:1px solid rgba(255,255,255,0.1); width:260px; box-shadow:0 20px 50px rgba(0,0,0,0.5); }
    .s { width:190px; height:190px; border-radius:50%; border:${bStyle === 'double' ? '6px' : '4px'} ${bStyle} ${accent}; margin: 0 auto 30px; overflow:hidden; position:relative; box-shadow:0 0 25px ${accent}, inset 0 0 20px ${accent}; background:${scrBg}; display: flex; justify-content: center; align-items: center; box-sizing: border-box; }
    .g { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
    .b { background:${btn}; border:1px solid rgba(255,255,255,0.1); border-radius:18px; font-size:26px; padding:15px; cursor:pointer; transition:all 0.3s ease; color:white; line-height:1; outline:none; }
    .b:hover { transform:translateY(-4px); border-color:${accent}; box-shadow: 0 0 15px ${accent}66; }
    img { width:100%; height:100%; object-fit: cover; opacity: 0; pointer-events:none; border-radius: 50%; transition: opacity 0.4s ease; }
    img.active { opacity: 1; }
</style>
</head>
<body>
    <div class='c'>
        <div style='color:${accent}; font-size:${fSize}px; letter-spacing:4px; margin-bottom:15px; font-weight:bold; text-transform:uppercase;'>${titleText}</div>
        <div class='s' id='sc'><img id='rx' src=''></div>
        <div class='g'>
            <button class='b' onclick="go('üò§')">üò§</button>
            <button class='b' onclick="go('‚ò∫Ô∏è')">‚ò∫Ô∏è</button>
            <button class='b' onclick="go('üòç')">üòç</button>
            <button class='b' onclick="go('ü§î')">ü§î</button>
            <button class='b' onclick="go('üò¢')">üò¢</button>
            <button class='b' onclick="go('üò≥')">üò≥</button>
        </div>
    </div>
    <script>
        const BASE = "https://raw.githubusercontent.com/gothiksmile/feedback_player/main/";
        let player = null;
        function go(emoji) {
            const img = document.getElementById('rx');
            const file = encodeURIComponent(emoji);
            if(player) { player.pause(); player.currentTime = 0; }
            player = new Audio(BASE + file + ".mp3");
            player.play().catch(e => console.log("Interaction needed"));
            
            img.classList.remove('active');
            setTimeout(() => {
                img.src = BASE + file + ".gif?v=" + new Date().getTime();
                img.classList.add('active');
            }, 50);

            setTimeout(() => { img.classList.remove('active'); }, 3000);
        }
    <\/script>
</body>
</html>`;

        const finalIframe = `<iframe srcdoc="${innerHTML.replace(/"/g, '&quot;')}" width="100%" height="100%" style="border:none;" allow="autoplay"></iframe>`;
        navigator.clipboard.writeText(finalIframe).then(() => { alert("Success! Custom Font and Size saved to clipboard."); });
    }
    liveUpdate();
</script>
</body>
</html>
