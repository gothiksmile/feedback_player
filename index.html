<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gothiksmile Feedback Builder</title>
    <style>
        :root { --accent: #ff0055; --bg: #0f0f0f; --panel: #1a1a1a; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; background: var(--bg); color: white; }

        /* Left side: Preview */
        .preview-section { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; border-right: 1px solid #333; position: relative; }
        .preview-label { position: absolute; top: 20px; font-size: 12px; color: #555; text-transform: uppercase; letter-spacing: 2px; }

        /* Right side: Editor */
        .editor-section { width: 360px; background: var(--panel); padding: 30px; overflow-y: auto; box-shadow: -5px 0 20px rgba(0,0,0,0.5); }
        
        /* Sidebar Elements */
        h2 { margin-top: 0; font-size: 1.2rem; border-bottom: 2px solid var(--accent); display: inline-block; padding-bottom: 5px; margin-bottom: 25px; }
        .control-group { margin-bottom: 20px; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; }
        label { display: block; font-size: 11px; color: #aaa; margin-bottom: 8px; text-transform: uppercase; }
        input[type="range"], input[type="color"] { width: 100%; cursor: pointer; border: none; background: transparent; }
        
        .action-btn { width: 100%; padding: 15px; background: var(--accent); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .action-btn:hover { filter: brightness(1.2); transform: translateY(-2px); }

        /* The Live Player Mockup */
        #player-mock { transition: all 0.2s ease; display: flex; flex-direction: column; align-items: center; }
        .m-screen { border-radius: 50%; display: flex; justify-content: center; align-items: center; margin-bottom: 20px; background: #000; }
        .m-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .m-btn { display: flex; justify-content: center; align-items: center; font-size: 20px; pointer-events: none; }
    </style>
</head>
<body>

<div class="preview-section">
    <div class="preview-label">Live Preview</div>
    <div id="player-mock">
        <div id="m-title" style="font-size: 10px; font-weight: bold; margin-bottom: 15px;">PLAYING FEEDBACK</div>
        <div class="m-screen" id="m-scr">
            <span style="font-size: 9px; opacity: 0.3;">READY</span>
        </div>
        <div class="m-grid">
            <div class="m-btn">üò§</div><div class="m-btn">‚ò∫Ô∏è</div><div class="m-btn">üòç</div>
            <div class="m-btn">ü§î</div><div class="m-btn">üò¢</div><div class="m-btn">üò≥</div>
        </div>
    </div>
</div>

<div class="editor-section">
    <h2>Customize Player</h2>
    
    <div class="control-group">
        <label>Console Color & Transparency</label>
        <input type="color" id="p-color" value="#1a1a1a" oninput="liveUpdate()">
        <input type="range" id="p-alpha" min="0" max="1" step="0.01" value="0.95" oninput="liveUpdate()">
    </div>

    <div class="control-group">
        <label>Circle / Text Color</label>
        <input type="color" id="p-accent" value="#ff0055" oninput="liveUpdate()">
    </div>

    <div class="control-group">
        <label>Button Color</label>
        <input type="color" id="p-btn" value="#333333" oninput="liveUpdate()">
    </div>

    <div class="control-group">
        <label>Overall Size</label>
        <input type="range" id="p-scale" min="0.5" max="1.4" step="0.01" value="1.0" oninput="liveUpdate()">
    </div>

    <button class="action-btn" onclick="copyGeniallyCode()">COPY IFRAME CODE</button>
    <p style="font-size: 10px; color: #666; margin-top: 15px;">Note: Emojis must match your .gif and .mp3 filenames on GitHub exactly.</p>
</div>

<script>
    function liveUpdate() {
        const color = document.getElementById('p-color').value;
        const alpha = document.getElementById('p-alpha').value;
        const accent = document.getElementById('p-accent').value;
        const btn = document.getElementById('p-btn').value;
        const scale = document.getElementById('p-scale').value;

        // Convert hex to rgba
        const r = parseInt(color.slice(1,3), 16), g = parseInt(color.slice(3,5), 16), b = parseInt(color.slice(5,7), 16);
        
        const player = document.getElementById('player-mock');
        player.style.background = `rgba(${r},${g},${b},${alpha})`;
        player.style.padding = "30px";
        player.style.borderRadius = "40px";
        player.style.transform = `scale(${scale})`;
        player.style.border = `1px solid rgba(255,255,255,0.1)`;

        const scr = document.getElementById('m-scr');
        scr.style.width = "140px"; scr.style.height = "140px";
        scr.style.border = `3px solid ${accent}`;
        scr.style.boxShadow = `0 0 15px ${accent}`;

        document.getElementById('m-title').style.color = accent;

        document.querySelectorAll('.m-btn').forEach(bElement => {
            bElement.style.background = btn;
            bElement.style.width = "50px"; bElement.style.height = "50px";
            bElement.style.borderRadius = "12px";
        });
    }

    function copyGeniallyCode() {
        const color = document.getElementById('p-color').value;
        const alpha = document.getElementById('p-alpha').value;
        const accent = document.getElementById('p-accent').value;
        const btn = document.getElementById('p-btn').value;
        const scale = document.getElementById('p-scale').value;
        const r = parseInt(color.slice(1,3), 16), g = parseInt(color.slice(3,5), 16), b = parseInt(color.slice(5,7), 16);

        // The actual logic that goes into Genially
        const innerHTML = `
<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<style>
    body { margin:0; background:transparent; display:flex; justify-content:center; align-items:center; height:100vh; overflow:hidden; font-family:sans-serif; }
    .c { background:rgba(${r},${g},${b},${alpha}); padding:40px 30px; border-radius:50px; text-align:center; transform:scale(${scale}); border:1px solid rgba(255,255,255,0.1); width:240px; box-shadow:0 20px 50px rgba(0,0,0,0.5); }
    .s { width:160px; height:160px; border-radius:50%; border:4px solid ${accent}; margin:0 auto 25px; overflow:hidden; position:relative; box-shadow:0 0 20px ${accent}, inset 0 0 15px ${accent}; background:#000; }
    .g { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
    .b { background:${btn}; border:1px solid rgba(255,255,255,0.1); border-radius:15px; font-size:24px; padding:12px; cursor:pointer; transition:0.2s; color:white; line-height:1; outline:none; }
    .b:hover { transform:translateY(-3px); border-color:${accent}; }
    img { width:100%; height:100%; object-fit:cover; display:none; pointer-events:none; }
</style>
</head>
<body>
    <div class='c'>
        <div style='color:${accent}; font-size:10px; letter-spacing:4px; margin-bottom:15px; font-weight:bold;'>PLAYING NOW</div>
        <div class='s' id='sc'><img id='rx' src=''></div>
        <div class='g'>
            <button class='b' onclick="go('üò§')">üò§</button>
            <button class='b' onclick="go('‚ò∫Ô∏è')">‚ò∫Ô∏è</button>
            <button class='b' onclick="go('üòç')">üòç</button>
            <button class='b' onclick="go('ü§î')">ü§î</button>
            <button class='b' onclick="go('üò¢')">üò¢</button>
            <button class='b' onclick="go('üò≥')">üò≥</button>
        </div>
    </div>
    <script>
        const BASE = "https://raw.githubusercontent.com/gothiksmile/feedback_player/main/";
        let player = null;
        function go(emoji) {
            const img = document.getElementById('rx');
            const file = encodeURIComponent(emoji);
            
            // Handle Audio
            if(player) { player.pause(); player.currentTime = 0; }
            player = new Audio(BASE + file + ".mp3");
            player.play().catch(e => console.log("Interaction needed"));

            // Handle GIF
            img.style.display = 'none';
            img.src = "";
            setTimeout(() => {
                img.src = BASE + file + ".gif?v=" + new Date().getTime();
                img.style.display = 'block';
            }, 50);

            setTimeout(() => { img.style.display = 'none'; }, 4500);
        }
    <\/script>
</body>
</html>`;

        const finalIframe = `<iframe srcdoc="${innerHTML.replace(/"/g, '&quot;')}" width="100%" height="100%" style="border:none;" allow="autoplay"></iframe>`;
        
        navigator.clipboard.writeText(finalIframe).then(() => {
            alert("Success! iFrame code copied. Now go to Genially > Insert > Others and paste.");
        });
    }

    // Initialize
    liveUpdate();
</script>
</body>
</html>
